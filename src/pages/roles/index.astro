---
import Layout from '../../layouts/Layout.astro';
import MetaHead from '../../components/MetaHead.astro';
import { BOOKING_URL, isExternalUrl } from '../../lib/cta';

const brand = 'LatAm Scalers';

const meta = {
	title: 'Vetted Remote Roles — AEC, Design & Marketing | LatAm Scalers',
	description:
		'Browse 28 pre-vetted remote roles across AEC, Creative & Design, and Marketing. BIM Coordinator, Civil 3D Specialist, Growth Product Designer, Motion Graphics, HubSpot Specialist, and more. Starting from $2,500/mo.',
};

const baseUrl = Astro.site ?? 'https://latam-scalers-website.vercel.app';
const canonical = new URL('/roles/', baseUrl).toString();

const bookingUrl = BOOKING_URL;
const bookingExternal = isExternalUrl(bookingUrl);

const roles = [
	// AEC Roles
	{
		slug: 'bim-coordinator',
		label: 'BIM Coordinator',
		category: 'aec',
		categoryLabel: 'AEC',
		description: 'Clash detection, federated model management, and coordination support using Navisworks, ACC, and BIM 360.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/bim-coordinator/',
	},
	{
		slug: 'architectural-designer',
		label: 'Architectural Designer',
		category: 'aec',
		categoryLabel: 'AEC',
		description: 'Schematic design, Revit modeling, construction documentation, and 3D visualization for US AEC firms.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/architectural-designer/',
	},
	{
		slug: 'revit-drafter',
		label: 'Revit Drafter',
		category: 'aec',
		categoryLabel: 'AEC',
		description: 'Production drafting, CD set development, and redline iteration in Revit and AutoCAD — aligned to your firm standards.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/revit-drafter/',
	},
	{
		slug: 'electrical-designer',
		label: 'Electrical Designer',
		category: 'aec',
		categoryLabel: 'AEC',
		description: 'Power distribution, lighting design, panel schedules, one-line diagrams, and NEC-aligned construction documents in Revit MEP and AutoCAD Electrical.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/electrical-designer/',
	},
	{
		slug: 'plumbing-designer',
		label: 'Plumbing Designer',
		category: 'aec',
		categoryLabel: 'AEC',
		description: 'Domestic water, sanitary and storm drainage systems, pipe sizing, fixture schedules, and Revit MEP coordination.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/plumbing-designer/',
	},
	{
		slug: 'hvac-designer',
		label: 'HVAC Designer',
		category: 'aec',
		categoryLabel: 'AEC',
		description: 'Load calculations (Manual J/D, ASHRAE), ductwork design, equipment selection, mechanical schedules, and Revit MEP coordination.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/hvac-designer/',
	},
	{
		slug: 'revit-mep-modeler',
		label: 'Revit MEP Modeler',
		category: 'aec',
		categoryLabel: 'AEC',
		description: 'Ductwork, piping, and electrical raceway modeling in Revit MEP with clash-ready BIM deliverables — highest remote suitability in AEC.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/revit-mep-modeler/',
	},
	{
		slug: 'civil-3d-specialist',
		label: 'Civil 3D Specialist',
		category: 'aec',
		categoryLabel: 'AEC',
		description: 'Infrastructure design, roadway alignments, grading and drainage, corridor modeling, and construction documents.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/civil-3d-specialist/',
	},
	{
		slug: 'structural-drafter',
		label: 'Structural Drafter',
		category: 'aec',
		categoryLabel: 'AEC',
		description: 'Structural drawings, connection details, foundation plans, rebar schedules, and Revit structural coordination.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/structural-drafter/',
	},
	{
		slug: 'visualization-specialist',
		label: 'Visualization Specialist',
		category: 'aec',
		categoryLabel: 'AEC',
		description: '3D renderings, animations, photorealistic presentations, and design communication using Enscape, Lumion, and V-Ray.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/visualization-specialist/',
	},
	// Design Roles
	{
		slug: 'brand-visual-designer',
		label: 'Brand & Visual Designer',
		category: 'design',
		categoryLabel: 'Design',
		description: 'Brand systems, marketing assets, and visual identity work using Adobe CC and Figma — dedicated to your brand.',
		pricing: 'From ~$2,800/mo',
		href: '/roles/brand-visual-designer/',
	},
	{
		slug: 'ui-ux-designer',
		label: 'UI/UX Designer',
		category: 'design',
		categoryLabel: 'Design',
		description: 'User research, wireframes, interactive prototypes, and usability testing using Figma, Maze, and Hotjar.',
		pricing: 'From ~$2,800/mo',
		href: '/roles/ui-ux-designer/',
	},
	{
		slug: 'growth-product-designer',
		label: 'Growth Product Designer',
		category: 'design',
		categoryLabel: 'Design',
		description: 'User research, onboarding flows, conversion optimization, activation metrics, and data-driven design for SaaS.',
		pricing: 'From ~$3,000/mo',
		href: '/roles/growth-product-designer/',
	},
	{
		slug: 'performance-creative-strategist',
		label: 'Performance Creative Strategist',
		category: 'design',
		categoryLabel: 'Design',
		description: 'Video production, social ad creative, weekly refresh cycles, A/B testing, and conversion optimization for DTC.',
		pricing: 'From ~$3,200/mo',
		href: '/roles/performance-creative-strategist/',
	},
	{
		slug: 'motion-graphics-specialist',
		label: 'Motion Graphics Specialist',
		category: 'design',
		categoryLabel: 'Design',
		description: 'Animated explainers, motion design, video production, and visual storytelling using After Effects and Premiere Pro.',
		pricing: 'From ~$3,200/mo',
		href: '/roles/motion-graphics-specialist/',
	},
	{
		slug: 'presentation-designer',
		label: 'Presentation Designer',
		category: 'design',
		categoryLabel: 'Design',
		description: 'Pitch decks, investor materials, research decks, and executive presentations with data visualization.',
		pricing: 'From ~$3,200/mo',
		href: '/roles/presentation-designer/',
	},
	{
		slug: 'packaging-designer',
		label: 'Packaging Designer',
		category: 'design',
		categoryLabel: 'Design',
		description: 'Product packaging, unboxing experience design, label design, and structural packaging for DTC brands.',
		pricing: 'From ~$3,000/mo',
		href: '/roles/packaging-designer/',
	},
	{
		slug: 'production-designer',
		label: 'Production Designer',
		category: 'design',
		categoryLabel: 'Design',
		description: 'Campaign execution, asset production, design implementation, and brand consistency for agencies.',
		pricing: 'From ~$2,800/mo',
		href: '/roles/production-designer/',
	},
	// Marketing Roles
	{
		slug: 'seo-specialist',
		label: 'SEO Specialist',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'Technical SEO, on-page optimization, content briefs, and monthly performance reporting using Ahrefs and Semrush.',
		pricing: 'From ~$2,500/mo',
		href: '/roles/seo-specialist/',
	},
	{
		slug: 'content-marketer',
		label: 'Content Marketer',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'SEO-driven blog posts, email copy, content calendars, and distribution strategy using HubSpot and WordPress.',
		pricing: 'From ~$2,500/mo',
		href: '/roles/content-marketer/',
	},
	{
		slug: 'ppc-manager',
		label: 'PPC Manager',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'Paid search and social campaigns across Google Ads and Meta Ads with full reporting and optimization cycles.',
		pricing: 'From ~$2,500/mo',
		href: '/roles/ppc-manager/',
	},
	{
		slug: 'hubspot-specialist',
		label: 'HubSpot Specialist',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'HubSpot implementation, workflows, reporting, and MarOps support with highest commercial intent ($89.21 CPC).',
		pricing: 'From ~$2,800/mo',
		href: '/roles/hubspot-specialist/',
	},
	{
		slug: 'lifecycle-email-specialist',
		label: 'Lifecycle Email Specialist',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'Retention marketing, email sequences, SMS campaigns, and lifecycle automation for DTC and SaaS (+20% YoY demand).',
		pricing: 'From ~$2,500/mo',
		href: '/roles/lifecycle-email-specialist/',
	},
	{
		slug: 'marketing-ops-specialist',
		label: 'Marketing Ops Specialist',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'Marketing automation, lead routing, CRM administration, reporting, and stack optimization for SaaS.',
		pricing: 'From ~$2,800/mo',
		href: '/roles/marketing-ops-specialist/',
	},
	{
		slug: 'social-media-manager',
		label: 'Social Media Manager',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'Content strategy, daily posting, community engagement, analytics, and multi-channel management (1,600/mo searches).',
		pricing: 'From ~$2,500/mo',
		href: '/roles/social-media-manager/',
	},
	{
		slug: 'analytics-specialist',
		label: 'Analytics Specialist',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'GA4, attribution modeling, data warehouses, dashboarding, and performance insights with +27% pay premium.',
		pricing: 'From ~$3,000/mo',
		href: '/roles/analytics-specialist/',
	},
	{
		slug: 'growth-marketing-manager',
		label: 'Growth Marketing Manager',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'Cross-channel growth, demand generation, pipeline velocity, and revenue impact for SaaS Tier 1+2.',
		pricing: 'From ~$3,200/mo',
		href: '/roles/growth-marketing-manager/',
	},
	{
		slug: 'demand-gen-specialist',
		label: 'Demand Gen Specialist',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'Lead generation campaigns, ABM support, pipeline development, and conversion optimization for SaaS.',
		pricing: 'From ~$2,800/mo',
		href: '/roles/demand-gen-specialist/',
	},
];

const categoryColors: Record<string, string> = {
	aec: 'text-aec border-aec/30 bg-aec/10',
	design: 'text-design border-design/30 bg-design/10',
	marketing: 'text-marketing border-marketing/30 bg-marketing/10',
};
---

<Layout>
	<MetaHead slot="head" title={meta.title} description={meta.description} canonical={canonical} />

	<main>
		<!-- Hero / Header -->
		<section class="bg-slate-950 py-16 sm:py-20" aria-labelledby="roles-heading">
			<div class="mx-auto max-w-6xl px-6">
				<div class="js-fade-in max-w-3xl">
					<p class="text-sm font-semibold uppercase tracking-widest text-sky-300">Roles Directory</p>
					<h1 id="roles-heading" class="mt-4 text-4xl font-semibold leading-tight tracking-tight text-white sm:text-5xl">
						Browse Vetted Remote Roles — AEC, Design, Marketing
					</h1>
					<p class="mt-5 text-base leading-relaxed text-slate-300 sm:text-lg">
						{roles.length} pre-vetted role types across AEC, Creative &amp; Design, and Marketing. All specialists are LATAM-based, timezone-aligned with US teams, and available month-to-month.
					</p>
				</div>

				<!-- Filter tabs -->
				<div class="mt-10 flex flex-wrap gap-2" role="group" aria-label="Filter roles by category">
					<button
						type="button"
						data-filter="all"
						class="filter-btn active rounded-full border border-sky-600 bg-sky-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-sky-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
					>
						All <span class="ml-1 tabular-nums opacity-80">({roles.length})</span>
					</button>
					<button
						type="button"
						data-filter="aec"
						class="filter-btn rounded-full border border-slate-700 bg-slate-900/40 px-4 py-2 text-sm font-semibold text-slate-300 transition hover:border-aec/40 hover:text-aec focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
					>
						AEC <span class="ml-1 tabular-nums opacity-80">({roles.filter(r => r.category === 'aec').length})</span>
					</button>
					<button
						type="button"
						data-filter="design"
						class="filter-btn rounded-full border border-slate-700 bg-slate-900/40 px-4 py-2 text-sm font-semibold text-slate-300 transition hover:border-design/40 hover:text-design focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
					>
						Design <span class="ml-1 tabular-nums opacity-80">({roles.filter(r => r.category === 'design').length})</span>
					</button>
					<button
						type="button"
						data-filter="marketing"
						class="filter-btn rounded-full border border-slate-700 bg-slate-900/40 px-4 py-2 text-sm font-semibold text-slate-300 transition hover:border-marketing/40 hover:text-marketing focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
					>
						Marketing <span class="ml-1 tabular-nums opacity-80">({roles.filter(r => r.category === 'marketing').length})</span>
					</button>
				</div>

				<!-- Search input -->
				<div class="mt-6 relative max-w-md">
					<label for="roles-search" class="sr-only">Search roles</label>
					<svg class="pointer-events-none absolute left-3.5 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true">
						<path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
					</svg>
					<input
						id="roles-search"
						type="search"
						autocomplete="off"
						placeholder="Search roles… e.g. Revit, HubSpot, BIM"
						class="w-full rounded-full border border-slate-700 bg-slate-900/60 py-2.5 pl-10 pr-10 text-sm text-white placeholder-slate-500 transition focus:border-sky-500 focus:outline-none focus:ring-2 focus:ring-sky-500/40"
					/>
					<button
						type="button"
						id="roles-search-clear"
						class="absolute right-3 top-1/2 -translate-y-1/2 hidden rounded-full p-0.5 text-slate-500 transition hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
						aria-label="Clear search"
					>
						<svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" /></svg>
					</button>
				</div>
				<p id="roles-search-count" class="mt-2 hidden text-xs text-slate-500"></p>
			</div>
		</section>

		<!-- Role Cards Grid -->
		<section class="bg-slate-950 pb-16 pt-6 sm:pb-20" aria-label="Role listings">
			<div class="mx-auto max-w-6xl px-6" id="roles-grid">

				<!-- AEC Category -->
				<div class="category-section mb-12" data-section="aec">
					<div class="mb-6 flex items-center gap-3">
						<span class="text-xs font-semibold uppercase tracking-widest text-aec">AEC</span>
						<span class="text-xs text-slate-500">({roles.filter(r => r.category === 'aec').length} roles)</span>
						<div class="h-px flex-1 bg-aec/20"></div>
					</div>
					<div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
					{roles.filter(r => r.category === 'aec').map((r) => (
						<a
							href={r.href}
							data-category={r.category}
							data-keywords={`${r.label} ${r.description} ${r.categoryLabel}`.toLowerCase()}
							class="role-card js-fade-in group rounded-2xl border border-slate-800 bg-slate-900/40 p-6 transition hover:bg-slate-900 hover:-translate-y-0.5 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
							>
								<span class={`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold ${categoryColors[r.category]}`}>
									{r.categoryLabel}
								</span>
								<p class="mt-3 text-base font-semibold text-slate-100 transition-colors group-hover:text-sky-200">{r.label}</p>
								<p class="mt-2 text-sm leading-relaxed text-slate-400">{r.description}</p>
								<div class="mt-4 flex items-center justify-between">
									<span class="text-sm font-semibold text-sky-300">{r.pricing}</span>
									<span class="text-sm font-semibold text-slate-400 transition-colors group-hover:text-sky-300">View role &rarr;</span>
								</div>
							</a>
						))}
					</div>
				</div>

				<!-- Design Category -->
				<div class="category-section mb-12" data-section="design">
					<div class="mb-6 flex items-center gap-3">
						<span class="text-xs font-semibold uppercase tracking-widest text-design">Creative &amp; Design</span>
						<span class="text-xs text-slate-500">({roles.filter(r => r.category === 'design').length} roles)</span>
						<div class="h-px flex-1 bg-design/20"></div>
					</div>
					<div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
					{roles.filter(r => r.category === 'design').map((r) => (
						<a
							href={r.href}
							data-category={r.category}
							data-keywords={`${r.label} ${r.description} ${r.categoryLabel}`.toLowerCase()}
							class="role-card js-fade-in group rounded-2xl border border-slate-800 bg-slate-900/40 p-6 transition hover:bg-slate-900 hover:-translate-y-0.5 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
							>
								<span class={`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold ${categoryColors[r.category]}`}>
									{r.categoryLabel}
								</span>
								<p class="mt-3 text-base font-semibold text-slate-100 transition-colors group-hover:text-sky-200">{r.label}</p>
								<p class="mt-2 text-sm leading-relaxed text-slate-400">{r.description}</p>
								<div class="mt-4 flex items-center justify-between">
									<span class="text-sm font-semibold text-sky-300">{r.pricing}</span>
									<span class="text-sm font-semibold text-slate-400 transition-colors group-hover:text-sky-300">View role &rarr;</span>
								</div>
							</a>
						))}
					</div>
				</div>

				<!-- Marketing Category -->
				<div class="category-section" data-section="marketing">
					<div class="mb-6 flex items-center gap-3">
						<span class="text-xs font-semibold uppercase tracking-widest text-marketing">Marketing</span>
						<span class="text-xs text-slate-500">({roles.filter(r => r.category === 'marketing').length} roles)</span>
						<div class="h-px flex-1 bg-marketing/20"></div>
					</div>
					<div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
					{roles.filter(r => r.category === 'marketing').map((r) => (
						<a
							href={r.href}
							data-category={r.category}
							data-keywords={`${r.label} ${r.description} ${r.categoryLabel}`.toLowerCase()}
							class="role-card js-fade-in group rounded-2xl border border-slate-800 bg-slate-900/40 p-6 transition hover:bg-slate-900 hover:-translate-y-0.5 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
							>
								<span class={`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold ${categoryColors[r.category]}`}>
									{r.categoryLabel}
								</span>
								<p class="mt-3 text-base font-semibold text-slate-100 transition-colors group-hover:text-sky-200">{r.label}</p>
								<p class="mt-2 text-sm leading-relaxed text-slate-400">{r.description}</p>
								<div class="mt-4 flex items-center justify-between">
									<span class="text-sm font-semibold text-sky-300">{r.pricing}</span>
									<span class="text-sm font-semibold text-slate-400 transition-colors group-hover:text-sky-300">View role &rarr;</span>
								</div>
							</a>
						))}
					</div>
				</div>

				<!-- Empty state (shown when no matching filter) -->
				<div id="roles-empty" class="hidden py-16 text-center">
					<p class="text-slate-400">No roles match this filter.</p>
				</div>
			</div>
		</section>

		<!-- Don't see your role? CTA -->
		<section class="bg-slate-900/40 py-14 sm:py-16">
			<div class="mx-auto max-w-6xl px-6">
				<div class="js-fade-in rounded-2xl border border-slate-800 bg-slate-950 p-6 sm:p-10">
					<div class="flex flex-col items-start justify-between gap-6 md:flex-row md:items-center">
						<div>
							<h2 class="text-2xl font-semibold tracking-tight text-white sm:text-3xl">Don't see your role?</h2>
							<p class="mt-2 max-w-prose text-sm leading-relaxed text-slate-300 sm:text-base">
								We place specialists across AEC, design, and marketing. Tell us what you need and we'll recommend the best-fit engagement and match options.
							</p>
						</div>
						<div class="flex shrink-0 flex-wrap gap-3">
							<a
								href={bookingUrl}
								{...(bookingExternal ? { target: '_blank', rel: 'noreferrer' } : {})}
								class="inline-flex min-h-[48px] items-center justify-center rounded bg-sky-600 px-6 py-3 text-sm font-semibold text-white transition hover:bg-sky-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
								data-book-call
							>
								Book a 30-Min Call
							</a>
							<a
								href="/#contact"
								class="inline-flex min-h-[48px] items-center justify-center rounded-xl border border-slate-700 bg-slate-900/40 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
								data-open-tell-us="roles-cta"
							>
								Tell Us What You Need
							</a>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>
</Layout>

<style>
	.js-fade-in {
		opacity: 0;
		transform: translateY(20px);
		transition: opacity 0.35s ease-out, transform 0.35s ease-out;
	}
	.js-fade-in.is-visible {
		opacity: 1;
		transform: translateY(0);
	}
	.filter-btn.active {
		border-color: rgb(2 132 199);
		background-color: rgb(2 132 199);
		color: white;
	}
	.role-card[hidden] {
		display: none;
	}
	.category-section[hidden] {
		display: none;
	}
</style>

<script is:inline>
	(function () {
		// Fade-in observer
		var els = document.querySelectorAll('.js-fade-in');
		if (els.length) {
			var io = new IntersectionObserver(function (entries) {
				entries.forEach(function (e) {
					if (e.isIntersecting) {
						e.target.classList.add('is-visible');
						io.unobserve(e.target);
					}
				});
			}, { threshold: 0.05, rootMargin: '0px 0px -30px 0px' });
			els.forEach(function (el) { io.observe(el); });
		}

		var btns = document.querySelectorAll('.filter-btn');
		var cards = document.querySelectorAll('.role-card');
		var sections = document.querySelectorAll('.category-section');
		var emptyState = document.getElementById('roles-empty');
		var searchInput = document.getElementById('roles-search');
		var clearBtn = document.getElementById('roles-search-clear');
		var countEl = document.getElementById('roles-search-count');
		var totalCards = cards.length;
		var activeFilter = 'all';

		function applyFilters() {
			var query = (searchInput ? searchInput.value : '').toLowerCase().trim();
			var visible = 0;
			var sectionVisible = {};

			cards.forEach(function (card) {
				var cat = card.getAttribute('data-category');
				var catMatch = activeFilter === 'all' || cat === activeFilter;
				var searchMatch = !query || (card.getAttribute('data-keywords') || '').indexOf(query) !== -1;

				if (catMatch && searchMatch) {
					card.removeAttribute('hidden');
					card.classList.add('is-visible');
					visible++;
					sectionVisible[cat] = true;
				} else {
					card.setAttribute('hidden', '');
				}
			});

			sections.forEach(function (section) {
				var cat = section.getAttribute('data-section');
				var catAllowed = activeFilter === 'all' || activeFilter === cat;
				if (catAllowed && sectionVisible[cat]) {
					section.removeAttribute('hidden');
				} else {
					section.setAttribute('hidden', '');
				}
			});

			if (emptyState) {
				emptyState.classList.toggle('hidden', visible > 0);
			}

			if (clearBtn) {
				clearBtn.classList.toggle('hidden', !query);
			}

			if (countEl) {
				if (query) {
					countEl.textContent = visible + ' of ' + totalCards + ' roles';
					countEl.classList.remove('hidden');
				} else {
					countEl.classList.add('hidden');
				}
			}
		}

		btns.forEach(function (btn) {
			btn.addEventListener('click', function () {
				activeFilter = btn.getAttribute('data-filter');
				btns.forEach(function (b) { b.classList.remove('active'); });
				btn.classList.add('active');
				applyFilters();
			});
		});

		if (searchInput) {
			searchInput.addEventListener('input', applyFilters);
		}

		if (clearBtn) {
			clearBtn.addEventListener('click', function () {
				if (searchInput) {
					searchInput.value = '';
					searchInput.focus();
				}
				applyFilters();
			});
		}
	})();
</script>

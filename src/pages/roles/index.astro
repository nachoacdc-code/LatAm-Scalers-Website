---
import Layout from '../../layouts/Layout.astro';
import MetaHead from '../../components/MetaHead.astro';
import { BOOKING_URL, isExternalUrl } from '../../lib/cta';

const brand = 'LatAm Scalers';

const meta = {
	title: 'Vetted Remote Roles — AEC, Design & Marketing | LatAm Scalers',
	description:
		'Browse 8 pre-vetted remote roles for US teams: BIM Coordinator, Architectural Designer, Revit Drafter, UI/UX Designer, Brand Designer, SEO Specialist, Content Marketer, PPC Manager. Starting from $2,500/mo.',
};

const baseUrl = Astro.site ?? 'https://latam-scalers-website.vercel.app';
const canonical = new URL('/roles/', baseUrl).toString();

const bookingUrl = BOOKING_URL;
const bookingExternal = isExternalUrl(bookingUrl);

const roles = [
	{
		slug: 'bim-coordinator',
		label: 'BIM Coordinator',
		category: 'aec',
		categoryLabel: 'AEC',
		description: 'Clash detection, federated model management, and coordination support using Navisworks, ACC, and BIM 360.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/bim-coordinator/',
	},
	{
		slug: 'architectural-designer',
		label: 'Architectural Designer',
		category: 'aec',
		categoryLabel: 'AEC',
		description: 'Schematic design, Revit modeling, construction documentation, and 3D visualization for US AEC firms.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/architectural-designer/',
	},
	{
		slug: 'revit-drafter',
		label: 'Revit Drafter',
		category: 'aec',
		categoryLabel: 'AEC',
		description: 'Production drafting, CD set development, and redline iteration in Revit and AutoCAD — aligned to your firm standards.',
		pricing: 'From ~$3,500/mo',
		href: '/roles/revit-drafter/',
	},
	{
		slug: 'brand-visual-designer',
		label: 'Brand & Visual Designer',
		category: 'design',
		categoryLabel: 'Design',
		description: 'Brand systems, marketing assets, and visual identity work using Adobe CC and Figma — dedicated to your brand.',
		pricing: 'From ~$2,800/mo',
		href: '/roles/brand-visual-designer/',
	},
	{
		slug: 'ui-ux-designer',
		label: 'UI/UX Designer',
		category: 'design',
		categoryLabel: 'Design',
		description: 'User research, wireframes, interactive prototypes, and usability testing using Figma, Maze, and Hotjar.',
		pricing: 'From ~$2,800/mo',
		href: '/roles/ui-ux-designer/',
	},
	{
		slug: 'seo-specialist',
		label: 'SEO Specialist',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'Technical SEO, on-page optimization, content briefs, and monthly performance reporting using Ahrefs and Semrush.',
		pricing: 'From ~$2,500/mo',
		href: '/roles/seo-specialist/',
	},
	{
		slug: 'content-marketer',
		label: 'Content Marketer',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'SEO-driven blog posts, email copy, content calendars, and distribution strategy using HubSpot and WordPress.',
		pricing: 'From ~$2,500/mo',
		href: '/roles/content-marketer/',
	},
	{
		slug: 'ppc-manager',
		label: 'PPC Manager',
		category: 'marketing',
		categoryLabel: 'Marketing',
		description: 'Paid search and social campaigns across Google Ads and Meta Ads with full reporting and optimization cycles.',
		pricing: 'From ~$2,500/mo',
		href: '/roles/ppc-manager/',
	},
];

const categoryColors: Record<string, string> = {
	aec: 'text-aec border-aec/30 bg-aec/10',
	design: 'text-design border-design/30 bg-design/10',
	marketing: 'text-marketing border-marketing/30 bg-marketing/10',
};
---

<Layout>
	<MetaHead slot="head" title={meta.title} description={meta.description} canonical={canonical} />

	<main>
		<!-- Hero / Header -->
		<section class="bg-slate-950 py-16 sm:py-20" aria-labelledby="roles-heading">
			<div class="mx-auto max-w-6xl px-6">
				<div class="js-fade-in max-w-3xl">
					<p class="text-sm font-semibold uppercase tracking-widest text-sky-300">Roles Directory</p>
					<h1 id="roles-heading" class="mt-4 text-4xl font-semibold leading-tight tracking-tight text-white sm:text-5xl">
						Browse Vetted Remote Roles — AEC, Design, Marketing
					</h1>
					<p class="mt-5 text-base leading-relaxed text-slate-300 sm:text-lg">
						{roles.length} pre-vetted role types. All specialists are LATAM-based, timezone-aligned with US teams, and available month-to-month.
					</p>
				</div>

				<!-- Filter tabs -->
				<div class="mt-10 flex flex-wrap gap-2" role="group" aria-label="Filter roles by category">
					<button
						type="button"
						data-filter="all"
						class="filter-btn active rounded-full border border-sky-600 bg-sky-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-sky-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
					>
						All <span class="ml-1 tabular-nums opacity-80">({roles.length})</span>
					</button>
					<button
						type="button"
						data-filter="aec"
						class="filter-btn rounded-full border border-slate-700 bg-slate-900/40 px-4 py-2 text-sm font-semibold text-slate-300 transition hover:border-aec/40 hover:text-aec focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
					>
						AEC <span class="ml-1 tabular-nums opacity-80">({roles.filter(r => r.category === 'aec').length})</span>
					</button>
					<button
						type="button"
						data-filter="design"
						class="filter-btn rounded-full border border-slate-700 bg-slate-900/40 px-4 py-2 text-sm font-semibold text-slate-300 transition hover:border-design/40 hover:text-design focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
					>
						Design <span class="ml-1 tabular-nums opacity-80">({roles.filter(r => r.category === 'design').length})</span>
					</button>
					<button
						type="button"
						data-filter="marketing"
						class="filter-btn rounded-full border border-slate-700 bg-slate-900/40 px-4 py-2 text-sm font-semibold text-slate-300 transition hover:border-marketing/40 hover:text-marketing focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
					>
						Marketing <span class="ml-1 tabular-nums opacity-80">({roles.filter(r => r.category === 'marketing').length})</span>
					</button>
				</div>
			</div>
		</section>

		<!-- Role Cards Grid -->
		<section class="bg-slate-950 pb-16 pt-6 sm:pb-20" aria-label="Role listings">
			<div class="mx-auto max-w-6xl px-6">
				<div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3" id="roles-grid">
					{roles.map((r) => (
						<a
							href={r.href}
							data-category={r.category}
							class="role-card js-fade-in group rounded-2xl border border-slate-800 bg-slate-900/40 p-6 transition hover:bg-slate-900 hover:-translate-y-0.5 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300"
						>
							<span class={`inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold ${categoryColors[r.category]}`}>
								{r.categoryLabel}
							</span>
							<p class="mt-3 text-base font-semibold text-slate-100 transition-colors group-hover:text-sky-200">{r.label}</p>
							<p class="mt-2 text-sm leading-relaxed text-slate-400">{r.description}</p>
							<div class="mt-4 flex items-center justify-between">
								<span class="text-sm font-semibold text-sky-300">{r.pricing}</span>
								<span class="text-sm font-semibold text-slate-400 transition-colors group-hover:text-sky-300">View role &rarr;</span>
							</div>
						</a>
					))}
				</div>

				<!-- Empty state (shown when no matching filter) -->
				<div id="roles-empty" class="hidden py-16 text-center">
					<p class="text-slate-400">No roles match this filter.</p>
				</div>
			</div>
		</section>

		<!-- Don't see your role? CTA -->
		<section class="bg-slate-900/40 py-14 sm:py-16">
			<div class="mx-auto max-w-6xl px-6">
				<div class="js-fade-in rounded-2xl border border-slate-800 bg-slate-950 p-6 sm:p-10">
					<div class="flex flex-col items-start justify-between gap-6 md:flex-row md:items-center">
						<div>
							<h2 class="text-2xl font-semibold tracking-tight text-white sm:text-3xl">Don't see your role?</h2>
							<p class="mt-2 max-w-prose text-sm leading-relaxed text-slate-300 sm:text-base">
								We place specialists across AEC, design, and marketing. Tell us what you need and we'll recommend the best-fit engagement and match options.
							</p>
						</div>
						<div class="flex shrink-0 flex-wrap gap-3">
							<a
								href={bookingUrl}
								{...(bookingExternal ? { target: '_blank', rel: 'noreferrer' } : {})}
								class="inline-flex min-h-[48px] items-center justify-center rounded bg-sky-600 px-6 py-3 text-sm font-semibold text-white transition hover:bg-sky-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
								data-book-call
							>
								Book a 15-Min Call
							</a>
							<a
								href="/#contact"
								class="inline-flex min-h-[48px] items-center justify-center rounded-xl border border-slate-700 bg-slate-900/40 px-6 py-3 text-sm font-semibold text-white transition hover:bg-slate-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-sky-300 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
								data-open-tell-us="roles-cta"
							>
								Tell Us What You Need
							</a>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>
</Layout>

<style>
	.js-fade-in {
		opacity: 0;
		transform: translateY(20px);
		transition: opacity 0.35s ease-out, transform 0.35s ease-out;
	}
	.js-fade-in.is-visible {
		opacity: 1;
		transform: translateY(0);
	}
	.filter-btn.active {
		border-color: rgb(2 132 199);
		background-color: rgb(2 132 199);
		color: white;
	}
	.role-card[hidden] {
		display: none;
	}
</style>

<script is:inline>
	(function () {
		// Fade-in observer
		var els = document.querySelectorAll('.js-fade-in');
		if (els.length) {
			var io = new IntersectionObserver(function (entries) {
				entries.forEach(function (e) {
					if (e.isIntersecting) {
						e.target.classList.add('is-visible');
						io.unobserve(e.target);
					}
				});
			}, { threshold: 0.05, rootMargin: '0px 0px -30px 0px' });
			els.forEach(function (el) { io.observe(el); });
		}

		// Filter tabs
		var btns = document.querySelectorAll('.filter-btn');
		var cards = document.querySelectorAll('.role-card');
		var emptyState = document.getElementById('roles-empty');

		btns.forEach(function (btn) {
			btn.addEventListener('click', function () {
				var filter = btn.getAttribute('data-filter');

				// Update active state
				btns.forEach(function (b) { b.classList.remove('active'); });
				btn.classList.add('active');

				// Show/hide cards
				var visible = 0;
				cards.forEach(function (card) {
					var match = filter === 'all' || card.getAttribute('data-category') === filter;
					if (match) {
						card.removeAttribute('hidden');
						visible++;
					} else {
						card.setAttribute('hidden', '');
					}
				});

				if (emptyState) {
					emptyState.classList.toggle('hidden', visible > 0);
				}
			});
		});
	})();
</script>

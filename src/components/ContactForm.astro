---
export type Props = {
	action?: string;
	redirectTo?: string;
	subject?: string;
	role?: string;
	defaultInterest?: string;
	defaultMessage?: string;
};

const action =
	Astro.props.action ??
	import.meta.env.PUBLIC_FORMSPREE_ACTION ??
	'https://formspree.io/f/yourFormId';

const redirectTo = Astro.props.redirectTo ?? '';
const subject = Astro.props.subject ?? 'LatAm Scalers â€” new inquiry';
const role = Astro.props.role ?? '';
const defaultInterest = Astro.props.defaultInterest ?? '';
const defaultMessage = Astro.props.defaultMessage ?? '';
---

<form
	action={action}
	method="POST"
	class="rounded-2xl border border-border bg-white shadow-sm p-6"
	aria-label="Contact form"
>
	<div class="grid gap-4 sm:grid-cols-2">
		<div class="sm:col-span-1">
			<label class="text-sm font-medium text-slate-200" for="name">Name</label>
			<input
				class="mt-2 w-full rounded-xl border border-border bg-bg-alt px-4 py-2.5 text-sm text-slate-100 placeholder:text-slate-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:"
				id="name"
				name="name"
				autocomplete="name"
				required
			/>
		</div>

		<div class="sm:col-span-1">
			<label class="text-sm font-medium text-slate-200" for="email">Work email</label>
			<input
				class="mt-2 w-full rounded-xl border border-border bg-bg-alt px-4 py-2.5 text-sm text-slate-100 placeholder:text-slate-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:"
				id="email"
				name="email"
				type="email"
				autocomplete="email"
				required
			/>
		</div>

		<div class="sm:col-span-2">
			<label class="text-sm font-medium text-slate-200" for="company">Company (optional)</label>
			<input
				class="mt-2 w-full rounded-xl border border-border bg-bg-alt px-4 py-2.5 text-sm text-slate-100 placeholder:text-slate-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:"
				id="company"
				name="company"
				autocomplete="organization"
			/>
		</div>

		<div class="sm:col-span-2">
			<label class="text-sm font-medium text-slate-200" for="interest">Interest</label>
			<select
				class="mt-2 w-full rounded-xl border border-border bg-bg-alt px-4 py-2.5 text-sm text-slate-100 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:"
				id="interest"
				name="interest"
				required
			>
				<option value="design" selected={defaultInterest === 'design'}>Design</option>
				<option value="aec" selected={defaultInterest === 'aec'}>AEC</option>
				<option value="marketing" selected={defaultInterest === 'marketing'}>Marketing</option>
				<option value="managed-teams" selected={defaultInterest === 'managed-teams'}>Managed Teams</option>
				<option value="other" selected={defaultInterest === 'other'}>Other</option>
			</select>
		</div>

		<div class="sm:col-span-2">
			<label class="text-sm font-medium text-slate-200" for="message">What do you need help with?</label>
			<textarea
				class="mt-2 min-h-28 w-full rounded-xl border border-border bg-bg-alt px-4 py-2.5 text-sm text-slate-100 placeholder:text-slate-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:"
				id="message"
				name="message"
				required
			>{defaultMessage}</textarea>
		</div>
	</div>

	<div class="hidden" aria-hidden="true">
		<label for="website">Website</label>
		<input id="website" name="website" tabindex="-1" autocomplete="off" />
	</div>

	<input type="hidden" name="_subject" value={subject} />
	{redirectTo ? <input type="hidden" name="_redirect" value={redirectTo} /> : null}
	{role ? <input type="hidden" name="role" value={role} /> : null}

	<div class="mt-6">
		<button
			type="submit"
			class="inline-flex items-center justify-center rounded bg-accent px-5 py-2.5 text-sm font-semibold text-white transition hover:bg-accent focus:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 focus-visible:"
		>
			Send message
		</button>
	</div>
</form>
